# EasiTradeCoins - æµ‹è¯•æ–‡æ¡£ç´¢å¼•

## ğŸ“š æµ‹è¯•æ–‡æ¡£æ€»è§ˆ

æœ¬æ–‡æ¡£æä¾›äº†EasiTradeCoinsé¡¹ç›®æ‰€æœ‰æµ‹è¯•çš„ç´¢å¼•å’Œè¯´æ˜ã€‚

---

## ğŸ§ª æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (Unit Tests)

#### åç«¯GoæœåŠ¡æµ‹è¯•
- **æ–‡ä»¶**: `go-backend/internal/services/services_test.go`
- **è¦†ç›–èŒƒå›´**:
  - âœ… æ æ†äº¤æ˜“æœåŠ¡ (Margin Trading Service)
  - âœ… æœŸæƒäº¤æ˜“æœåŠ¡ (Options Trading Service)
  - âœ… è·Ÿå•äº¤æ˜“æœåŠ¡ (Copy Trading Service)
  - âœ… äº¤æ˜“ç¤¾åŒºæœåŠ¡ (Community Service)
  - âœ… ç½‘æ ¼äº¤æ˜“æœåŠ¡ (Grid Trading Service)
  - âœ… DCAæœåŠ¡ (Dollar Cost Averaging)
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  cd go-backend
  go test -v ./internal/services/... -cover
  ```

#### æ™ºèƒ½åˆçº¦æµ‹è¯•
- **æ–‡ä»¶**: `contracts/test/DEXAggregator.test.js`
- **è¦†ç›–èŒƒå›´**:
  - âœ… DEXèšåˆå™¨ (DEX Aggregator)
  - âœ… æµåŠ¨æ€§æŒ–çŸ¿ (Liquidity Mining)
  - âœ… Poolç®¡ç†
  - âœ… Staking/Unstaking
  - âœ… å¥–åŠ±åˆ†é…
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  cd contracts
  npx hardhat test
  ```

---

### 2. é›†æˆæµ‹è¯• (Integration Tests)

- **è„šæœ¬**: `tests/integration_test.sh`
- **æµ‹è¯•å†…å®¹**:
  - âœ… æ•°æ®åº“è¿æ¥ (PostgreSQL, MySQL, Redis)
  - âœ… æ¶ˆæ¯é˜Ÿåˆ— (Kafka)
  - âœ… æœç´¢å¼•æ“ (Elasticsearch)
  - âœ… APIç«¯ç‚¹
  - âœ… WebSocketè¿æ¥
  - âœ… å„æœåŠ¡é—´åä½œ
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  bash ./tests/integration_test.sh
  ```

---

### 3. APIåŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | é¢„æœŸå“åº” |
|------|------|------|----------|
| `/health` | GET | å¥åº·æ£€æŸ¥ | `{"status":"ok"}` |
| `/api/v1/trading-pairs` | GET | è·å–äº¤æ˜“å¯¹ | äº¤æ˜“å¯¹åˆ—è¡¨ |
| `/api/v1/orderbook/:symbol` | GET | è·å–è®¢å•ç°¿ | è®¢å•ç°¿æ•°æ® |
| `/api/v1/orders` | POST | åˆ›å»ºè®¢å• | è®¢å•è¯¦æƒ… |
| `/swagger/index.html` | GET | APIæ–‡æ¡£ | Swagger UI |
| `/metrics` | GET | PrometheusæŒ‡æ ‡ | æŒ‡æ ‡æ•°æ® |

**è¿è¡Œå‘½ä»¤**:
```bash
# å¯åŠ¨åç«¯
cd go-backend && go run cmd/server/main.go

# æµ‹è¯•API
curl http://localhost:8080/health
curl http://localhost:8080/api/v1/trading-pairs
```

---

### 4. Sepoliaæµ‹è¯•ç½‘éƒ¨ç½²æµ‹è¯•

- **è„šæœ¬**: `contracts/scripts/deploy-sepolia.js`
- **æµ‹è¯•å†…å®¹**:
  - âœ… éƒ¨ç½²DEXèšåˆå™¨åˆçº¦
  - âœ… éƒ¨ç½²æµåŠ¨æ€§æŒ–çŸ¿åˆçº¦
  - âœ… éƒ¨ç½²æµ‹è¯•ä»£å¸
  - âœ… åˆçº¦äº¤äº’æµ‹è¯•
  - âœ… éªŒè¯åˆçº¦åŠŸèƒ½
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  cd contracts
  npx hardhat run scripts/deploy-sepolia.js --network sepolia
  ```
- **æµ‹è¯•ç½‘ä¿¡æ¯**:
  - ç½‘ç»œ: Sepolia Testnet
  - Chain ID: 11155111
  - åŒºå—æµè§ˆå™¨: https://sepolia.etherscan.io/
  - æ°´é¾™å¤´: https://sepoliafaucet.com/

#### å·²éƒ¨ç½²åˆçº¦åœ°å€
éƒ¨ç½²åï¼Œåˆçº¦åœ°å€å°†ä¿å­˜åœ¨ `contracts/deployments/sepolia-{timestamp}.json`

---

### 5. å®‰å…¨å®¡è®¡æµ‹è¯•

- **è„šæœ¬**: `tests/security_audit.sh`
- **å®¡è®¡èŒƒå›´**:
  - âœ… ä»£ç å®‰å…¨åˆ†æ (ç¡¬ç¼–ç å¯†ç ã€SQLæ³¨å…¥ã€XSS)
  - âœ… æ™ºèƒ½åˆçº¦å®‰å…¨ (é‡å…¥æ”»å‡»ã€æº¢å‡ºä¿æŠ¤ã€è®¿é—®æ§åˆ¶)
  - âœ… è®¤è¯æˆæƒ (JWTã€å¯†ç å“ˆå¸Œ)
  - âœ… æ•°æ®ä¿æŠ¤ (HTTPSã€æ•æ„Ÿæ•°æ®)
  - âœ… è¾“å…¥éªŒè¯
  - âœ… é€Ÿç‡é™åˆ¶
  - âœ… é”™è¯¯å¤„ç†
  - âœ… ä¾èµ–é¡¹å®‰å…¨
  - âœ… é…ç½®å®‰å…¨
  - âœ… é™æ€åˆ†æ (Slither)
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  bash ./tests/security_audit.sh
  ```
- **æŠ¥å‘Šä½ç½®**: `security-audit-reports/audit-{timestamp}.md`

#### å®‰å…¨å®¡è®¡å·¥å…·
- **govulncheck**: Goä¾èµ–æ¼æ´æ‰«æ
- **npm audit**: npmä¾èµ–æ¼æ´æ‰«æ
- **Slither**: Solidityé™æ€åˆ†æ
- **grep**: ä»£ç æ¨¡å¼åŒ¹é…

---

### 6. æ€§èƒ½æµ‹è¯•

- **è„šæœ¬**: `tests/performance_test.sh`
- **æµ‹è¯•æŒ‡æ ‡**:
  - âœ… APIå“åº”æ—¶é—´
  - âœ… æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
  - âœ… è´Ÿè½½æµ‹è¯• (Apache Bench)
  - âœ… WebSocketæ€§èƒ½
  - âœ… å†…å­˜/CPUä½¿ç”¨ç‡
  - âœ… ç³»ç»Ÿååé‡
  - âœ… å‹åŠ›æµ‹è¯•
- **è¿è¡Œå‘½ä»¤**:
  ```bash
  bash ./tests/performance_test.sh
  ```
- **æŠ¥å‘Šä½ç½®**: `performance-reports/performance-{timestamp}.md`

#### æ€§èƒ½åŸºå‡†
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æœ¬æœºæ€§èƒ½ |
|------|--------|----------|
| APIå“åº”æ—¶é—´ | < 100ms | - |
| PostgreSQLå†™å…¥ | - | 105 ops/s |
| PostgreSQLè¯»å– | - | 368 ops/s |
| MySQLå†™å…¥ | - | 88 ops/s |
| MySQLè¯»å– | - | 909 ops/s |
| Rediså†™å…¥ | - | 18.8K ops/s |
| Redisè¯»å– | - | 7.1K ops/s |
| Kafkaååé‡ | - | 7.4K msg/s |
| Elasticsearchç´¢å¼• | - | 24 docs/s |
| ElasticsearchæŸ¥è¯¢ | - | 2.3K queries/s |

---

### 7. ä»£ç è¦†ç›–ç‡æµ‹è¯•

#### Goä»£ç è¦†ç›–ç‡
```bash
cd go-backend
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html
```

#### Solidityä»£ç è¦†ç›–ç‡
```bash
cd contracts
npx hardhat coverage
```

---

## ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•

ä½¿ç”¨ä¸»æµ‹è¯•è¿è¡Œè„šæœ¬æ‰§è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼š

```bash
bash ./run_all_tests.sh
```

æ­¤è„šæœ¬å°†è‡ªåŠ¨è¿è¡Œï¼š
1. âœ… å•å…ƒæµ‹è¯•
2. âœ… é›†æˆæµ‹è¯•
3. âœ… APIæµ‹è¯•
4. âœ… æ•°æ®åº“æµ‹è¯•
5. âœ… æ€§èƒ½æµ‹è¯•
6. âœ… å®‰å…¨å®¡è®¡
7. âœ… Sepoliaéƒ¨ç½²æµ‹è¯•
8. âœ… ä»£ç è¦†ç›–ç‡åˆ†æ
9. âœ… ä»£ç è´¨é‡æ£€æŸ¥
10. âœ… æ„å»ºæµ‹è¯•

**æµ‹è¯•æŠ¥å‘Š**: æ‰€æœ‰æµ‹è¯•æŠ¥å‘Šå°†ä¿å­˜åœ¨ `test-reports/` ç›®å½•

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### æŠ¥å‘Šç±»å‹

1. **ä¸»æµ‹è¯•æŠ¥å‘Š**
   - ä½ç½®: `test-reports/master-report-{timestamp}.md`
   - å†…å®¹: æ‰€æœ‰æµ‹è¯•çš„æ±‡æ€»ç»“æœ

2. **å•å…ƒæµ‹è¯•æ—¥å¿—**
   - Go: `test-reports/go-unit-tests.log`
   - åˆçº¦: `test-reports/contract-tests.log`

3. **é›†æˆæµ‹è¯•æ—¥å¿—**
   - ä½ç½®: `test-reports/integration-tests.log`

4. **æ€§èƒ½æµ‹è¯•æŠ¥å‘Š**
   - ä½ç½®: `performance-reports/performance-{timestamp}.md`

5. **å®‰å…¨å®¡è®¡æŠ¥å‘Š**
   - ä½ç½®: `security-audit-reports/audit-{timestamp}.md`

6. **Sepoliaéƒ¨ç½²æ—¥å¿—**
   - ä½ç½®: `test-reports/sepolia-deployment.log`
   - åˆçº¦åœ°å€: `contracts/deployments/sepolia-{timestamp}.json`

7. **ä»£ç è¦†ç›–ç‡æŠ¥å‘Š**
   - Go: `test-reports/go-coverage.html`
   - Solidity: `test-reports/solidity-coverage.log`

---

## ğŸ”§ æµ‹è¯•ç¯å¢ƒé…ç½®

### æœ¬æœºç¯å¢ƒè¦æ±‚

1. **æ•°æ®åº“**:
   - PostgreSQL 5432 (socialfi/socialfi_pg_pass_2024)
   - MySQL 3306 (root/æ— å¯†ç )
   - Redis 6379 (æ— å¯†ç )

2. **æ¶ˆæ¯é˜Ÿåˆ—**:
   - Kafka 9092 (æ— è®¤è¯)
   - Kafka UI 8090

3. **æœç´¢å¼•æ“**:
   - Elasticsearch 9200 (æ— è®¤è¯)

4. **å¼€å‘å·¥å…·**:
   - Go 1.21+
   - Node.js 18+
   - Hardhat
   - Git

### é…ç½®æ–‡ä»¶

- **æœ¬æœºé…ç½®**: `.env.local`
- **Dockeré…ç½®**: `docker-compose.local.yml`
- **Goé…ç½®**: `go-backend/internal/config/config.go`

---

## ğŸ“ æµ‹è¯•æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] APIæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡
- [ ] å®‰å…¨å®¡è®¡æ— ä¸¥é‡é—®é¢˜
- [ ] ä»£ç è¦†ç›–ç‡ > 80%
- [ ] Sepoliaæµ‹è¯•ç½‘éƒ¨ç½²æˆåŠŸ
- [ ] åˆçº¦éªŒè¯å®Œæˆ
- [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´

### æµ‹è¯•æµç¨‹

1. **æœ¬åœ°æµ‹è¯•** â†’ 2. **é›†æˆæµ‹è¯•** â†’ 3. **æ€§èƒ½æµ‹è¯•** â†’ 4. **å®‰å…¨å®¡è®¡** â†’ 5. **æµ‹è¯•ç½‘éƒ¨ç½²** â†’ 6. **ç”Ÿäº§éƒ¨ç½²**

---

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ
   - éªŒè¯è¿æ¥é…ç½® (.env.local)
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

2. **Kafkaè¿æ¥å¤±è´¥**
   - ç¡®è®¤KafkaæœåŠ¡å¯åŠ¨
   - æ£€æŸ¥ç«¯å£9092æ˜¯å¦å¼€æ”¾

3. **æµ‹è¯•è¶…æ—¶**
   - å¢åŠ è¶…æ—¶æ—¶é—´
   - æ£€æŸ¥ç³»ç»Ÿèµ„æº

4. **åˆçº¦éƒ¨ç½²å¤±è´¥**
   - ç¡®è®¤æœ‰è¶³å¤Ÿçš„Sepolia ETH
   - éªŒè¯RPC URLé…ç½®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®README](../README.md)
- [APIæ–‡æ¡£](http://localhost:8080/swagger/index.html)
- [æ¶æ„æ–‡æ¡£](../docs/architecture.md)
- [éƒ¨ç½²æŒ‡å—](../docs/deployment.md)

---

**æœ€åæ›´æ–°**: 2025-11-02
**ç»´æŠ¤è€…**: Aitachi
