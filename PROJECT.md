# EasiTradeCoins - é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®**: EasiTradeCoins - ä¸“ä¸šçº§åŠ å¯†è´§å¸äº¤æ˜“å¹³å°
**ä½œè€…**: Aitachi
**è”ç³»**: 44158892@qq.com
**æ—¥æœŸ**: 2025-11-02
**ç‰ˆæœ¬**: 1.0

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [é¡¹ç›®æ–‡ä»¶ç»“æ„](#é¡¹ç›®æ–‡ä»¶ç»“æ„)
3. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
4. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
5. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
6. [APIæ–‡æ¡£](#apiæ–‡æ¡£)
7. [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)
8. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

---

## é¡¹ç›®ç®€ä»‹

### é¡¹ç›®æ¦‚è¿°

EasiTradeCoinsæ˜¯ä¸€ä¸ªä¼ä¸šçº§å»ä¸­å¿ƒåŒ–åŠ å¯†è´§å¸äº¤æ˜“å¹³å°ï¼Œæ•´åˆäº†ç°è´§äº¤æ˜“ã€è¡ç”Ÿå“äº¤æ˜“ã€DeFiç”Ÿæ€å’Œç¤¾äº¤é‡‘èåŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨Goè¯­è¨€æ„å»ºé«˜æ€§èƒ½åç«¯ï¼ŒSolidityå¼€å‘æ™ºèƒ½åˆçº¦ï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€é«˜æ•ˆã€ä¸“ä¸šçš„æ•°å­—èµ„äº§äº¤æ˜“æœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

ğŸš€ **å¤šæ ·åŒ–äº¤æ˜“**
- ç°è´§äº¤æ˜“: é™ä»·å•ã€å¸‚ä»·å•ã€æ­¢æŸæ­¢ç›ˆ
- é«˜çº§è®¢å•: OCOã€å†°å±±è®¢å•ã€TWAP
- è‡ªåŠ¨åŒ–ç­–ç•¥: ç½‘æ ¼äº¤æ˜“ã€DCAå®šæŠ•
- è¡ç”Ÿå“: æ æ†äº¤æ˜“(1-10x)ã€æœŸæƒäº¤æ˜“

ğŸ’ **DeFiç”Ÿæ€**
- DEXèšåˆå™¨: å¤šDEXä»·æ ¼èšåˆï¼Œæœ€ä¼˜è·¯ç”±
- æµåŠ¨æ€§æŒ–çŸ¿: å¤šæ± è´¨æŠ¼ï¼Œçµæ´»å¥–åŠ±
- è·¨é“¾æ¡¥æ¥: å¤šé“¾èµ„äº§è½¬ç§»(å¼€å‘ä¸­)
- æ”¶ç›Šèšåˆ: è‡ªåŠ¨æ”¶ç›Šä¼˜åŒ–(å¼€å‘ä¸­)

ğŸ‘¥ **ç¤¾äº¤é‡‘è**
- è·Ÿå•äº¤æ˜“: ä¸€é”®è·Ÿéšä¸“ä¸šäº¤æ˜“å‘˜
- äº¤æ˜“ç¤¾åŒº: ç­–ç•¥åˆ†äº«ï¼Œmarketåˆ†æ
- æ’è¡Œæ¦œ: æ”¶ç›Šã€èƒœç‡å®æ—¶æ’å(å¼€å‘ä¸­)
- NFTå¾½ç« : æˆå°±ç³»ç»Ÿ(å¼€å‘ä¸­)

ğŸ›¡ï¸ **ä¼ä¸šçº§å®‰å…¨**
- å®Œå–„é£æ§: è®¢å•éªŒè¯ã€è¡Œä¸ºç›‘æ§ã€å¼‚å¸¸æ£€æµ‹
- å®‰å…¨å®¡è®¡: ä»£ç å®¡è®¡ã€åˆçº¦å®¡è®¡ã€ä¾èµ–æ‰«æ
- å¤šé‡éªŒè¯: 2FAã€KYCã€ç”Ÿç‰©è¯†åˆ«
- èµ„é‡‘å®‰å…¨: å†·çƒ­é’±åŒ…åˆ†ç¦»ã€å¤šç­¾é’±åŒ…

âš¡ **é«˜æ€§èƒ½**
- æ’®åˆå¼•æ“: é«˜é¢‘æ’®åˆï¼Œæ¯«ç§’çº§å“åº”
- WebSocket: å®æ—¶è¡Œæƒ…æ¨é€
- Redisç¼“å­˜: çƒ­ç‚¹æ•°æ®ç¼“å­˜
- æ°´å¹³æ‰©å±•: å¾®æœåŠ¡æ¶æ„ï¼Œå¯å¼¹æ€§æ‰©å®¹

### é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **æ€»ä»£ç è¡Œæ•°** | ~26,000 | åŒ…å«åç«¯ã€åˆçº¦ã€æµ‹è¯• |
| **Goåç«¯æ–‡ä»¶** | 35+ | ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒ |
| **æ™ºèƒ½åˆçº¦** | 15+ | DeFiåŠŸèƒ½å®ç° |
| **æµ‹è¯•è„šæœ¬** | 11 | å®Œæ•´æµ‹è¯•å¥—ä»¶ |
| **æ•°æ®åº“è¡¨** | 34 | PostgreSQL+MySQL |
| **APIç«¯ç‚¹** | 50+ | RESTful API |
| **åŠŸèƒ½å®Œæˆåº¦** | 40.3% | 29/72 åŠŸèƒ½ |

### é¡¹ç›®çŠ¶æ€

- **ç‰ˆæœ¬**: v0.4.0 (Alpha)
- **çŠ¶æ€**: ğŸ”„ æŒç»­å¼€å‘
- **è®¸å¯**: MIT License
- **ä»£ç ä»“åº“**: https://github.com/aitachi/easiTradeCoins

---

## é¡¹ç›®æ–‡ä»¶ç»“æ„

```
EasiTradeCoins/
â”‚
â”œâ”€â”€ ğŸ“ go-backend/                          # Goåç«¯æœåŠ¡
â”‚   â”œâ”€â”€ cmd/                                # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”‚       â””â”€â”€ main.go                     # æœåŠ¡å…¥å£ (200è¡Œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ internal/                           # å†…éƒ¨åŒ…
â”‚   â”‚   â”œâ”€â”€ config/                         # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ config.go                   # ç»Ÿä¸€é…ç½® (200è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                       # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.go             # ç”¨æˆ·è®¤è¯ (300è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ user_service.go             # ç”¨æˆ·ç®¡ç† (250è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ wallet_service.go           # é’±åŒ…ç®¡ç† (350è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ order_service.go            # è®¢å•æœåŠ¡ (400è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ stop_order_service.go       # æ­¢æŸæ­¢ç›ˆ (300è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ trailing_stop_service.go    # è·Ÿè¸ªæ­¢æŸ (280è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ conditional_order_service.go# æ¡ä»¶å• (250è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ oco_order_service.go        # OCOè®¢å• (350è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ iceberg_order_service.go    # å†°å±±è®¢å• (320è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ twap_order_service.go       # TWAPè®¢å• (280è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ grid_trading_service.go     # ç½‘æ ¼äº¤æ˜“ (518è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ dca_service.go              # DCAå®šæŠ• (452è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ margin_trading_service.go   # æ æ†äº¤æ˜“ (600è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ options_trading_service.go  # æœŸæƒäº¤æ˜“ (430è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ copy_trading_service.go     # è·Ÿå•äº¤æ˜“ (550è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ community_service.go        # äº¤æ˜“ç¤¾åŒº (400è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ kyc_service.go              # KYCéªŒè¯ (250è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_service.go            # å®¡è®¡æ—¥å¿— (200è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ services_test.go            # å•å…ƒæµ‹è¯• (170è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ matching/                       # æ’®åˆå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ engine.go                   # æ’®åˆæ ¸å¿ƒ (400è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ orderbook.go                # è®¢å•ç°¿ (300è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ security/                       # å®‰å…¨æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ risk_manager.go             # é£æ§ç®¡ç† (350è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ rate_limiter.go             # é€Ÿç‡é™åˆ¶ (150è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ validator.go                # è¾“å…¥éªŒè¯ (200è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ websocket/                      # WebSocketæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ hub.go                      # è¿æ¥ç®¡ç† (250è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ client.go                   # å®¢æˆ·ç«¯ (200è¡Œ)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ models/                         # æ•°æ®æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ user.go                     # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ order.go                    # è®¢å•æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ trade.go                    # äº¤æ˜“æ¨¡å‹
â”‚   â”‚       â””â”€â”€ ... (30+ æ¨¡å‹æ–‡ä»¶)
â”‚   â”‚
â”‚   â”œâ”€â”€ go.mod                              # Goæ¨¡å—å®šä¹‰
â”‚   â”œâ”€â”€ go.sum                              # ä¾èµ–æ ¡éªŒå’Œ
â”‚   â””â”€â”€ Dockerfile                          # Dockeræ„å»ºæ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ contracts/                           # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ src/                                # åˆçº¦æºç 
â”‚   â”‚   â”œâ”€â”€ DEXAggregator.sol               # DEXèšåˆå™¨ (280è¡Œ)
â”‚   â”‚   â”œâ”€â”€ LiquidityMining.sol             # æµåŠ¨æ€§æŒ–çŸ¿ (280è¡Œ)
â”‚   â”‚   â”œâ”€â”€ MockERC20.sol                   # Mockä»£å¸ (35è¡Œ)
â”‚   â”‚   â””â”€â”€ ... (12+ åˆçº¦æ–‡ä»¶)
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                            # éƒ¨ç½²è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ deploy.js                       # æœ¬åœ°éƒ¨ç½² (150è¡Œ)
â”‚   â”‚   â””â”€â”€ deploy-sepolia.js               # Sepoliaéƒ¨ç½² (300è¡Œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ test/                               # åˆçº¦æµ‹è¯•
â”‚   â”‚   â””â”€â”€ DEXAggregator.test.js           # åˆçº¦æµ‹è¯• (400è¡Œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ deployments/                        # éƒ¨ç½²è®°å½•
â”‚   â”‚   â””â”€â”€ sepolia-{timestamp}.json        # Sepoliaåœ°å€
â”‚   â”‚
â”‚   â”œâ”€â”€ hardhat.config.js                   # Hardhaté…ç½®
â”‚   â”œâ”€â”€ package.json                        # NPMä¾èµ–
â”‚   â””â”€â”€ .env                                # ç¯å¢ƒå˜é‡
â”‚
â”œâ”€â”€ ğŸ“ deployment/                          # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ init_mysql.sql                      # MySQLåˆå§‹åŒ– (34å¼ è¡¨)
â”‚   â”œâ”€â”€ init_postgres.sql                   # PostgreSQLåˆå§‹åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ nginx/                              # Nginxé…ç½®
â”‚   â”‚   â””â”€â”€ nginx.conf                      # Nginxé…ç½®æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ prometheus/                         # Prometheusé…ç½®
â”‚   â”‚   â””â”€â”€ prometheus.yml                  # ç›‘æ§é…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ grafana/                            # Grafanaé…ç½®
â”‚       â””â”€â”€ dashboards/                     # ä»ªè¡¨æ¿
â”‚
â”œâ”€â”€ ğŸ“ tests/                               # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ integration_test.sh                 # é›†æˆæµ‹è¯• (200è¡Œ)
â”‚   â”œâ”€â”€ performance_test.sh                 # æ€§èƒ½æµ‹è¯• (250è¡Œ)
â”‚   â””â”€â”€ security_audit.sh                   # å®‰å…¨å®¡è®¡ (300è¡Œ)
â”‚
â”œâ”€â”€ ğŸ“ test-reports/                        # æµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ go-unit-tests.log                   # Goæµ‹è¯•æ—¥å¿—
â”‚   â”œâ”€â”€ contract-tests.log                  # åˆçº¦æµ‹è¯•æ—¥å¿—
â”‚   â”œâ”€â”€ integration-tests.log               # é›†æˆæµ‹è¯•æ—¥å¿—
â”‚   â”œâ”€â”€ performance-tests.log               # æ€§èƒ½æµ‹è¯•æ—¥å¿—
â”‚   â””â”€â”€ security-audit.log                  # å®‰å…¨å®¡è®¡æ—¥å¿—
â”‚
â”œâ”€â”€ ğŸ“ docs/                                # æ–‡æ¡£ç›®å½•(å·²åºŸå¼ƒ)
â”‚
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒæ–‡æ¡£                             # é¡¹ç›®æ ¸å¿ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                           # é¡¹ç›®ä¸»æ–‡æ¡£ â­
â”‚   â”œâ”€â”€ TESTING.md                          # æµ‹è¯•æ–‡æ¡£
â”‚   â”œâ”€â”€ FEATURES.md                         # åŠŸèƒ½æ–‡æ¡£
â”‚   â””â”€â”€ PROJECT.md                          # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶                             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .env.local                          # æœ¬æœºç¯å¢ƒé…ç½® (120è¡Œ)
â”‚   â”œâ”€â”€ docker-compose.yml                  # Dockerå®Œæ•´é…ç½® (467è¡Œ)
â”‚   â”œâ”€â”€ docker-compose.local.yml            # Dockeræœ¬æœºé…ç½® (150è¡Œ)
â”‚   â””â”€â”€ .gitignore                          # Gitå¿½ç•¥é…ç½®
â”‚
â””â”€â”€ ğŸ“„ è„šæœ¬æ–‡ä»¶                             # è„šæœ¬æ–‡ä»¶
    â””â”€â”€ run_all_tests.sh                    # ä¸»æµ‹è¯•è¿è¡Œå™¨ (307è¡Œ)
```

### æ–‡ä»¶è¯´æ˜

#### Goåç«¯æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | åŠŸèƒ½ | è¡Œæ•° | é‡è¦æ€§ |
|------|------|------|--------|
| `main.go` | æœåŠ¡å¯åŠ¨å…¥å£ | 200 | â­â­â­â­â­ |
| `config.go` | ç»Ÿä¸€é…ç½®ç®¡ç† | 200 | â­â­â­â­â­ |
| `order_service.go` | è®¢å•æ ¸å¿ƒæœåŠ¡ | 400 | â­â­â­â­â­ |
| `matching/engine.go` | æ’®åˆå¼•æ“ | 400 | â­â­â­â­â­ |
| `risk_manager.go` | é£æ§ç³»ç»Ÿ | 350 | â­â­â­â­â­ |
| `margin_trading_service.go` | æ æ†äº¤æ˜“ | 600 | â­â­â­â­ |
| `options_trading_service.go` | æœŸæƒäº¤æ˜“ | 430 | â­â­â­â­ |
| `grid_trading_service.go` | ç½‘æ ¼äº¤æ˜“ | 518 | â­â­â­â­ |
| `copy_trading_service.go` | è·Ÿå•äº¤æ˜“ | 550 | â­â­â­â­ |
| `websocket/hub.go` | WebSocketç®¡ç† | 250 | â­â­â­â­ |

#### æ™ºèƒ½åˆçº¦æ–‡ä»¶

| æ–‡ä»¶ | åŠŸèƒ½ | è¡Œæ•° | ç½‘ç»œ |
|------|------|------|------|
| `DEXAggregator.sol` | DEXèšåˆå™¨ | 280 | Ethereum, BSC |
| `LiquidityMining.sol` | æµåŠ¨æ€§æŒ–çŸ¿ | 280 | Ethereum, BSC |
| `MockERC20.sol` | æµ‹è¯•ä»£å¸ | 35 | Testnet |

#### é…ç½®æ–‡ä»¶è¯´æ˜

**`.env.local`** - æœ¬æœºå¼€å‘ç¯å¢ƒé…ç½®
```bash
# PostgreSQLé…ç½®
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=socialfi
POSTGRES_PASSWORD=socialfi_pg_pass_2024

# MySQLé…ç½®
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# Kafkaé…ç½®
KAFKA_BROKERS=localhost:9092
```

**`docker-compose.yml`** - Dockerå®Œæ•´éƒ¨ç½²é…ç½®
- PostgreSQLæ•°æ®åº“
- MySQLæ•°æ®åº“
- Redisç¼“å­˜
- Kafkaæ¶ˆæ¯é˜Ÿåˆ—
- Elasticsearchæœç´¢å¼•æ“
- Prometheusç›‘æ§
- Grafanaå¯è§†åŒ–
- Nginxè´Ÿè½½å‡è¡¡

**`docker-compose.local.yml`** - Dockerè¿æ¥æœ¬æœºæœåŠ¡
- åç«¯å®¹å™¨
- é€šè¿‡`host.docker.internal`è®¿é—®å®¿ä¸»æœºæœåŠ¡

---

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Go** | 1.21+ | åç«¯ä¸»è¯­è¨€ |
| **Gin** | 1.9+ | Webæ¡†æ¶ |
| **GORM** | 1.25+ | ORMæ¡†æ¶ |
| **JWT** | 5.0+ | èº«ä»½è®¤è¯ |
| **WebSocket** | - | å®æ—¶é€šä¿¡ |
| **Swagger** | 2.0 | APIæ–‡æ¡£ |

### æ•°æ®åº“

| æ•°æ®åº“ | ç‰ˆæœ¬ | ç”¨é€” |
|--------|------|------|
| **PostgreSQL** | 14+ | ä¸»æ•°æ®åº“ |
| **MySQL** | 8+ | è¾…åŠ©å­˜å‚¨ |
| **Redis** | 7+ | ç¼“å­˜&ä¼šè¯ |
| **Kafka** | 3+ | æ¶ˆæ¯é˜Ÿåˆ— |
| **Elasticsearch** | 8+ | å…¨æ–‡æœç´¢ |

### æ™ºèƒ½åˆçº¦

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Solidity** | 0.8.20 | åˆçº¦è¯­è¨€ |
| **Hardhat** | 3.0+ | å¼€å‘æ¡†æ¶ |
| **OpenZeppelin** | 5.4+ | åˆçº¦åº“ |
| **Ethers.js** | 6.0+ | ä»¥å¤ªåŠåº“ |

### DevOps

| å·¥å…· | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Docker** | 20+ | å®¹å™¨åŒ– |
| **Docker Compose** | 2.0+ | å®¹å™¨ç¼–æ’ |
| **Nginx** | 1.24+ | åå‘ä»£ç† |
| **Prometheus** | 2.45+ | ç›‘æ§ç³»ç»Ÿ |
| **Grafana** | 10.0+ | å¯è§†åŒ– |

### æµ‹è¯•å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| **Go Testing** | å•å…ƒæµ‹è¯• |
| **Testify** | æ–­è¨€åº“ |
| **Hardhat** | åˆçº¦æµ‹è¯• |
| **Chai** | æ–­è¨€åº“ |
| **Apache Bench** | æ€§èƒ½æµ‹è¯• |
| **Slither** | åˆçº¦å®¡è®¡ |

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å±‚                              â”‚
â”‚  Webæµè§ˆå™¨  â”‚  ç§»åŠ¨App  â”‚  APIå®¢æˆ·ç«¯  â”‚  WebSocketå®¢æˆ·ç«¯  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è´Ÿè½½å‡è¡¡å±‚ (Nginx)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨å±‚ (Goåç«¯)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ APIæœåŠ¡1 â”‚  â”‚ APIæœåŠ¡2 â”‚  â”‚ APIæœåŠ¡3 â”‚  â”‚  WSæœåŠ¡  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æœåŠ¡å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚è®¢å•æœåŠ¡  â”‚  â”‚æ’®åˆå¼•æ“  â”‚  â”‚é£æ§ç³»ç»Ÿ  â”‚  â”‚é’±åŒ…æœåŠ¡  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ æ†äº¤æ˜“  â”‚  â”‚æœŸæƒäº¤æ˜“  â”‚  â”‚ç½‘æ ¼äº¤æ˜“  â”‚  â”‚è·Ÿå•äº¤æ˜“  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚PostgreSQLâ”‚  â”‚  MySQL   â”‚  â”‚  Redis   â”‚  â”‚  Kafka   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚Elasticsearchâ”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åŒºå—é“¾å±‚ (Ethereum/BSC)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ DEXAggregatorâ”‚  â”‚LiquidityMiningâ”‚ â”‚  å…¶ä»–åˆçº¦    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¾®æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway                         â”‚
â”‚              (è·¯ç”±ã€è®¤è¯ã€é™æµã€ç†”æ–­)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æœåŠ¡    â”‚                        â”‚  äº¤æ˜“æœåŠ¡    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  è®¤è¯    â”‚ â”‚                        â”‚ â”‚  è®¢å•    â”‚ â”‚
â”‚ â”‚  KYC     â”‚ â”‚                        â”‚ â”‚  æ’®åˆ    â”‚ â”‚
â”‚ â”‚  é’±åŒ…    â”‚ â”‚                        â”‚ â”‚  æˆäº¤    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¡ç”Ÿå“æœåŠ¡  â”‚                        â”‚  ç¤¾äº¤æœåŠ¡    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  æ æ†    â”‚ â”‚                        â”‚ â”‚  è·Ÿå•    â”‚ â”‚
â”‚ â”‚  æœŸæƒ    â”‚ â”‚                        â”‚ â”‚  ç¤¾åŒº    â”‚ â”‚
â”‚ â”‚  ç½‘æ ¼    â”‚ â”‚                        â”‚ â”‚  æ’è¡Œæ¦œ  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é£æ§æœåŠ¡    â”‚                        â”‚  æ•°æ®æœåŠ¡    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  éªŒè¯    â”‚ â”‚                        â”‚ â”‚  åˆ†æ    â”‚ â”‚
â”‚ â”‚  ç›‘æ§    â”‚ â”‚                        â”‚ â”‚  æŠ¥è¡¨    â”‚ â”‚
â”‚ â”‚  å®¡è®¡    â”‚ â”‚                        â”‚ â”‚  ç»Ÿè®¡    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµæ¶æ„

```
ç”¨æˆ·ä¸‹å• â†’ API Gateway â†’ è®¢å•éªŒè¯ â†’ é£æ§æ£€æŸ¥ â†’ å…¥åº“ â†’ æ’®åˆå¼•æ“
                                                      â”‚
                                                      â–¼
                                                   è®¢å•ç°¿
                                                      â”‚
                                                      â–¼
                                                   æ’®åˆæˆåŠŸ
                                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â”‚                                       â”‚
                    â–¼                                       â–¼
                 æ›´æ–°æ•°æ®åº“                            WebSocketæ¨é€
                    â”‚                                       â”‚
                    â”‚                                       â–¼
                    â”‚                                    å®æ—¶é€šçŸ¥
                    â–¼
                å‘é€Kafkaæ¶ˆæ¯
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          â”‚          â”‚
         â–¼          â–¼          â–¼
    é£æ§åˆ†æ   æ•°æ®åˆ†æ   é€šçŸ¥æœåŠ¡
```

---

## æ•°æ®åº“è®¾è®¡

### PostgreSQLæ•°æ®åº“

**ç”¨é€”**: æ ¸å¿ƒä¸šåŠ¡æ•°æ®å­˜å‚¨

#### æ ¸å¿ƒè¡¨ç»“æ„

##### 1. ç”¨æˆ·ç›¸å…³

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    status VARCHAR(20) DEFAULT 'active',
    kyc_level INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- é’±åŒ…è¡¨
CREATE TABLE wallets (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    currency VARCHAR(10) NOT NULL,
    balance DECIMAL(20,8) DEFAULT 0,
    frozen DECIMAL(20,8) DEFAULT 0,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, currency)
);
```

##### 2. äº¤æ˜“ç›¸å…³

```sql
-- è®¢å•è¡¨
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    symbol VARCHAR(20) NOT NULL,
    side VARCHAR(4) NOT NULL,  -- buy/sell
    type VARCHAR(20) NOT NULL, -- limit/market/stop
    price DECIMAL(20,8),
    quantity DECIMAL(20,8) NOT NULL,
    filled_quantity DECIMAL(20,8) DEFAULT 0,
    status VARCHAR(20) DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_status (user_id, status),
    INDEX idx_symbol_status (symbol, status)
);

-- äº¤æ˜“è¡¨
CREATE TABLE trades (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    buyer_id INT REFERENCES users(id),
    seller_id INT REFERENCES users(id),
    buy_order_id INT REFERENCES orders(id),
    sell_order_id INT REFERENCES orders(id),
    price DECIMAL(20,8) NOT NULL,
    quantity DECIMAL(20,8) NOT NULL,
    amount DECIMAL(20,8) NOT NULL,
    fee DECIMAL(20,8) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_buyer (buyer_id),
    INDEX idx_seller (seller_id),
    INDEX idx_symbol_time (symbol, created_at)
);
```

##### 3. æ æ†äº¤æ˜“ç›¸å…³

```sql
-- æ æ†è´¦æˆ·è¡¨
CREATE TABLE margin_accounts (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id) UNIQUE,
    total_assets DECIMAL(20,8) DEFAULT 0,
    total_liabilities DECIMAL(20,8) DEFAULT 0,
    net_assets DECIMAL(20,8) DEFAULT 0,
    margin_level DECIMAL(10,4) DEFAULT 0,
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ æ†æŒä»“è¡¨
CREATE TABLE margin_positions (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    account_id INT REFERENCES margin_accounts(id),
    symbol VARCHAR(20) NOT NULL,
    side VARCHAR(10) NOT NULL,  -- long/short
    entry_price DECIMAL(20,8) NOT NULL,
    current_price DECIMAL(20,8),
    quantity DECIMAL(20,8) NOT NULL,
    leverage INT NOT NULL,
    margin DECIMAL(20,8) NOT NULL,
    borrowed_amount DECIMAL(20,8) DEFAULT 0,
    unrealized_pnl DECIMAL(20,8) DEFAULT 0,
    liquidation_price DECIMAL(20,8),
    status VARCHAR(20) DEFAULT 'open',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_status (user_id, status)
);
```

##### 4. æœŸæƒäº¤æ˜“ç›¸å…³

```sql
-- æœŸæƒåˆçº¦è¡¨
CREATE TABLE option_contracts (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL,
    type VARCHAR(10) NOT NULL,  -- call/put
    strike_price DECIMAL(20,8) NOT NULL,
    premium DECIMAL(20,8) NOT NULL,
    expiry_date TIMESTAMP NOT NULL,
    style VARCHAR(20) DEFAULT 'european',
    status VARCHAR(20) DEFAULT 'active',
    underlying_price DECIMAL(20,8),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_symbol_expiry (symbol, expiry_date)
);

-- æœŸæƒæŒä»“è¡¨
CREATE TABLE option_positions (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    contract_id INT REFERENCES option_contracts(id),
    type VARCHAR(10) NOT NULL,  -- buy/sell
    quantity DECIMAL(20,8) NOT NULL,
    entry_price DECIMAL(20,8) NOT NULL,
    current_price DECIMAL(20,8),
    pnl DECIMAL(20,8) DEFAULT 0,
    status VARCHAR(20) DEFAULT 'open',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_contract (user_id, contract_id)
);
```

##### 5. ç¤¾äº¤é‡‘èç›¸å…³

```sql
-- äº¤æ˜“å‘˜è¡¨
CREATE TABLE traders (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id) UNIQUE,
    display_name VARCHAR(100),
    description TEXT,
    win_rate DECIMAL(5,2) DEFAULT 0,
    total_profit DECIMAL(20,8) DEFAULT 0,
    follower_count INT DEFAULT 0,
    max_followers INT DEFAULT 1000,
    commission_rate DECIMAL(5,4) DEFAULT 0.2,
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_profit (total_profit DESC)
);

-- è·Ÿå•å…³ç³»è¡¨
CREATE TABLE follow_relations (
    id SERIAL PRIMARY KEY,
    follower_id INT REFERENCES users(id),
    trader_id INT REFERENCES traders(id),
    copy_ratio DECIMAL(5,4) DEFAULT 1.0,
    max_copy_amount DECIMAL(20,8),
    stop_loss_ratio DECIMAL(5,4),
    status VARCHAR(20) DEFAULT 'active',
    total_copied INT DEFAULT 0,
    total_profit DECIMAL(20,8) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(follower_id, trader_id),
    INDEX idx_trader (trader_id)
);

-- äº¤æ˜“ç¤¾åŒºè¡¨
CREATE TABLE trading_communities (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    creator_id INT REFERENCES users(id),
    member_count INT DEFAULT 0,
    post_count INT DEFAULT 0,
    category VARCHAR(50),
    is_public BOOLEAN DEFAULT true,
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å¸–å­è¡¨
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    community_id INT REFERENCES trading_communities(id),
    author_id INT REFERENCES users(id),
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    type VARCHAR(20),  -- ç­–ç•¥/åˆ†æ/è®¨è®º
    view_count INT DEFAULT 0,
    like_count INT DEFAULT 0,
    comment_count INT DEFAULT 0,
    is_top BOOLEAN DEFAULT false,
    tags JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_community_time (community_id, created_at DESC)
);
```

### MySQLæ•°æ®åº“

**ç”¨é€”**: æ—¥å¿—ã€ç»Ÿè®¡ã€é…ç½®ç­‰è¾…åŠ©æ•°æ®

```sql
-- å®¡è®¡æ—¥å¿—è¡¨
CREATE TABLE audit_logs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    action VARCHAR(100),
    resource VARCHAR(100),
    details JSON,
    ip_address VARCHAR(45),
    status VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_time (user_id, created_at),
    INDEX idx_action (action)
);

-- ç³»ç»Ÿé…ç½®è¡¨
CREATE TABLE system_configs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    key VARCHAR(100) UNIQUE NOT NULL,
    value TEXT,
    description VARCHAR(255),
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### Redisç¼“å­˜

**ç”¨é€”**: çƒ­ç‚¹æ•°æ®ç¼“å­˜ã€ä¼šè¯ç®¡ç†

```
ç¼“å­˜ç»“æ„:

1. ç”¨æˆ·ä¼šè¯
   key: session:{token}
   value: {user_id, permissions, ...}
   ttl: 1å°æ—¶

2. è®¢å•ç°¿ç¼“å­˜
   key: orderbook:{symbol}
   value: {bids: [...], asks: [...]}
   ttl: 10ç§’

3. è¡Œæƒ…æ•°æ®
   key: ticker:{symbol}
   value: {price, volume, ...}
   ttl: 5ç§’

4. é€Ÿç‡é™åˆ¶
   key: ratelimit:{ip}:{endpoint}
   value: è¯·æ±‚è®¡æ•°
   ttl: 1åˆ†é’Ÿ
```

---

## APIæ–‡æ¡£

### è®¤è¯æ¥å£

#### ç”¨æˆ·æ³¨å†Œ
```
POST /api/v1/auth/register
Content-Type: application/json

Request:
{
  "email": "user@example.com",
  "password": "StrongP@ss123",
  "username": "trader001"
}

Response:
{
  "code": 200,
  "message": "success",
  "data": {
    "user_id": 123,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

#### ç”¨æˆ·ç™»å½•
```
POST /api/v1/auth/login
Content-Type: application/json

Request:
{
  "email": "user@example.com",
  "password": "StrongP@ss123"
}

Response:
{
  "code": 200,
  "message": "success",
  "data": {
    "user_id": 123,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expires_in": 3600
  }
}
```

### äº¤æ˜“æ¥å£

#### åˆ›å»ºè®¢å•
```
POST /api/v1/orders
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "symbol": "BTC_USDT",
  "side": "buy",
  "type": "limit",
  "price": "50000.00",
  "quantity": "0.1"
}

Response:
{
  "code": 200,
  "message": "success",
  "data": {
    "order_id": 456789,
    "status": "pending",
    "created_at": "2025-11-02T12:00:00Z"
  }
}
```

#### æŸ¥è¯¢è®¢å•
```
GET /api/v1/orders/{order_id}
Authorization: Bearer {token}

Response:
{
  "code": 200,
  "data": {
    "id": 456789,
    "symbol": "BTC_USDT",
    "side": "buy",
    "type": "limit",
    "price": "50000.00",
    "quantity": "0.1",
    "filled_quantity": "0.05",
    "status": "partial_filled",
    "created_at": "2025-11-02T12:00:00Z"
  }
}
```

### æ æ†äº¤æ˜“æ¥å£

#### å¼€ä»“
```
POST /api/v1/margin/open-position
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "symbol": "BTC_USDT",
  "side": "long",
  "entry_price": "50000",
  "quantity": "1.0",
  "leverage": 5
}

Response:
{
  "code": 200,
  "data": {
    "position_id": 123,
    "margin": "10000",
    "borrowed_amount": "40000",
    "liquidation_price": "42000"
  }
}
```

### WebSocketæ¥å£

#### è®¢é˜…è¡Œæƒ…
```
ws://localhost:8080/ws

// è¿æ¥åå‘é€è®¢é˜…æ¶ˆæ¯
{
  "action": "subscribe",
  "channel": "ticker",
  "symbol": "BTC_USDT"
}

// æœåŠ¡å™¨æ¨é€
{
  "channel": "ticker",
  "symbol": "BTC_USDT",
  "data": {
    "price": "50000.00",
    "volume_24h": "12345.67",
    "change_24h": "+2.5%",
    "timestamp": 1699123456
  }
}
```

å®Œæ•´APIæ–‡æ¡£è¯·è®¿é—®: http://localhost:8080/swagger/index.html

---

## éƒ¨ç½²æ¶æ„

### Docker Composeéƒ¨ç½²

```yaml
# docker-compose.yml
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:14
    environment:
      POSTGRES_USER: socialfi
      POSTGRES_PASSWORD: socialfi_pg_pass_2024
      POSTGRES_DB: socialfi
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # Kafkaæ¶ˆæ¯é˜Ÿåˆ—
  kafka:
    image: bitnami/kafka:3.6
    ports:
      - "9092:9092"
    environment:
      - KAFKA_CFG_NODE_ID=0
      - KAFKA_CFG_PROCESS_ROLES=controller,broker
      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093
      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092

  # Goåç«¯
  backend:
    build: ./go-backend
    ports:
      - "8080:8080"
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis
      - KAFKA_BROKERS=kafka:9092
    depends_on:
      - postgres
      - redis
      - kafka

volumes:
  postgres_data:
  redis_data:
```

### å¯åŠ¨å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»º
docker-compose up -d --build
```

---

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º

#### 1. å®‰è£…ä¾èµ–

```bash
# Goç¯å¢ƒ
go version  # éœ€è¦ 1.21+

# Node.jsç¯å¢ƒ
node --version  # éœ€è¦ 18+
npm --version

# Dockerç¯å¢ƒ
docker --version  # éœ€è¦ 20+
docker-compose --version  # éœ€è¦ 2.0+
```

#### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/aitachi/easiTradeCoins.git
cd easiTradeCoins
```

#### 3. å¯åŠ¨æœ¬æœºæœåŠ¡

```bash
# å¯åŠ¨PostgreSQL
systemctl start postgresql

# å¯åŠ¨MySQL
systemctl start mysql

# å¯åŠ¨Redis
systemctl start redis

# å¯åŠ¨Kafka
systemctl start kafka
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.local.example .env.local

# ç¼–è¾‘é…ç½®
vim .env.local
```

#### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# PostgreSQL
psql -U socialfi -d socialfi < deployment/init_postgres.sql

# MySQL
mysql -u root < deployment/init_mysql.sql
```

#### 6. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd go-backend
go mod download
go run cmd/server/main.go
```

#### 7. è®¿é—®æœåŠ¡

```bash
# API
curl http://localhost:8080/health

# Swaggeræ–‡æ¡£
open http://localhost:8080/swagger/index.html

# Metrics
curl http://localhost:8081/metrics
```

### ä»£ç è§„èŒƒ

#### Goä»£ç è§„èŒƒ

```go
// ä½¿ç”¨gofmtæ ¼å¼åŒ–
gofmt -w .

// ä½¿ç”¨golangci-lintæ£€æŸ¥
golangci-lint run ./...

// å‘½åè§„èŒƒ
// - åŒ…å: å°å†™å•è¯ï¼Œå¦‚ orderservice
// - æ–‡ä»¶å: å°å†™ä¸‹åˆ’çº¿ï¼Œå¦‚ order_service.go
// - å‡½æ•°å: é©¼å³°å‘½åï¼Œå¦‚ CreateOrder
// - å˜é‡å: é©¼å³°å‘½åï¼Œå¦‚ orderID
```

#### Solidityä»£ç è§„èŒƒ

```solidity
// ä½¿ç”¨solhintæ£€æŸ¥
npx solhint 'src/**/*.sol'

// å‘½åè§„èŒƒ
// - åˆçº¦å: å¤§å†™å¼€å¤´é©¼å³°ï¼Œå¦‚ DEXAggregator
// - å‡½æ•°å: å°å†™å¼€å¤´é©¼å³°ï¼Œå¦‚ registerDEX
// - å˜é‡å: å°å†™å¼€å¤´é©¼å³°ï¼Œå¦‚ platformFee
// - å¸¸é‡: å…¨å¤§å†™ä¸‹åˆ’çº¿ï¼Œå¦‚ MAX_UINT256
```

### Gitå·¥ä½œæµ

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# æäº¤ä»£ç 
git add .
git commit -m "feat: add new feature"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/new-feature

# åˆ›å»ºPull Request
gh pr create --title "Add new feature"
```

### æµ‹è¯•

```bash
# Goå•å…ƒæµ‹è¯•
cd go-backend
go test -v ./...

# æ™ºèƒ½åˆçº¦æµ‹è¯•
cd contracts
npx hardhat test

# é›†æˆæµ‹è¯•
bash ./tests/integration_test.sh

# æ€§èƒ½æµ‹è¯•
bash ./tests/performance_test.sh

# å®‰å…¨å®¡è®¡
bash ./tests/security_audit.sh
```

---

## è”ç³»æ–¹å¼

**é¡¹ç›®**: EasiTradeCoins
**ä½œè€…**: Aitachi
**é‚®ç®±**: 44158892@qq.com
**GitHub**: https://github.com/aitachi/easiTradeCoins
**é—®é¢˜åé¦ˆ**: https://github.com/aitachi/easiTradeCoins/issues

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-11-02
**ç»´æŠ¤è€…**: Aitachi
