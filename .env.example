# ================================
# EasiTradeCoins Environment Configuration
# ================================
# Copy this file to .env and update the values
# SECURITY WARNING: Never commit .env file with real credentials to version control!

# ================================
# Application Configuration
# ================================
APP_ENV=production
APP_PORT=8080
APP_METRICS_PORT=8081
BUILD_VERSION=1.0.0
NODE_ENV=production

# ================================
# Database Configuration (PostgreSQL)
# ================================
POSTGRES_DB=easitradecoins
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_PORT=5432
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/easitradecoins

# Database Connection Pool
DB_SSL_MODE=disable
DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10

# ================================
# Redis Configuration
# ================================
REDIS_PASSWORD=your-secure-redis-password
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://localhost:6379

# ================================
# Kafka Configuration
# ================================
KAFKA_TOPIC_ORDERS=orders
KAFKA_TOPIC_TRADES=trades
KAFKA_TOPIC_NOTIFICATIONS=notifications
KAFKA_TOPIC_RISK_EVENTS=risk_events

# ================================
# Security & Authentication
# ================================
# IMPORTANT: Change this to a random 64+ character string in production
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-64-chars
JWT_EXPIRATION=24h
BCRYPT_COST=10

# Admin Credentials
ADMIN_EMAIL=admin@easitrade.com
ADMIN_PASSWORD=change-this-password

# ================================
# Blockchain Configuration - Ethereum Mainnet
# ================================
NETWORK=mainnet
ETHEREUM_CHAIN_ID=1

# 主网RPC (按速度排序)
MAINNET_RPC_URL=https://eth.llamarpc.com
ETHEREUM_RPC_URL=https://eth.llamarpc.com
BACKUP_MAINNET_RPC=https://rpc.ankr.com/eth
BACKUP_MAINNET_RPC2=https://ethereum-rpc.publicnode.com
BACKUP_MAINNET_RPC3=https://mainnet.infura.io/v3/YOUR-PROJECT-ID

# ================================
# Blockchain Configuration - Sepolia Testnet (for development)
# ================================
# NETWORK=sepolia
# ETHEREUM_CHAIN_ID=11155111
# SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR-PROJECT-ID
# ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/YOUR-PROJECT-ID
# BACKUP_SEPOLIA_RPC=https://eth-sepolia.public.blastapi.io
# BACKUP_SEPOLIA_RPC2=https://sepolia.gateway.tenderly.co
# BACKUP_SEPOLIA_RPC3=https://rpc.sepolia.dev

# ================================
# Wallet Configuration
# ================================
# Private Key (NEVER commit this with real values)
# Generate a new one for production: openssl rand -hex 32
PRIVATE_KEY=

# Metamask Configuration (for development only)
METAMASK_ETH_KEY=
METAMASK_SOLANA_KEY=

# ================================
# Infura Configuration
# ================================
INFURA_API_KEY=YOUR-PROJECT-ID
INFURA_API_SECRET=

# ================================
# Smart Contract Addresses
# ================================
CONTRACT_ADDRESS_STAKING=0x0000000000000000000000000000000000000000
CONTRACT_ADDRESS_AIRDROP=0x0000000000000000000000000000000000000000
CONTRACT_ADDRESS_TOKEN_FACTORY=0x0000000000000000000000000000000000000000
CONTRACT_ADDRESS_MULTISIG=0x0000000000000000000000000000000000000000

# Gas Configuration
GAS_LIMIT=300000
GAS_PRICE_GWEI=50
TIMEOUT_MS=15000

# ================================
# Risk Management Configuration
# ================================
# Order Limits
MAX_ORDER_SIZE=1000000
ORDER_RATE_LIMIT=10
ORDER_RATE_WINDOW=60s

# Price Deviation Detection
MAX_PRICE_DEVIATION=0.20

# Withdrawal Limits
WITHDRAWAL_DAILY_LIMIT=100000
DAILY_WITHDRAWAL_LIMIT=100000
LARGE_WITHDRAWAL_THRESHOLD=10000
WITHDRAWAL_MANUAL_REVIEW_THRESHOLD=50000

# API Rate Limiting
API_RATE_LIMIT=100

# Self-Trading Detection
SELF_TRADING_TIME_WINDOW=5m
SELF_TRADING_COUNT_THRESHOLD=5

# Quick In-Out Detection
QUICK_INOUT_TIME_WINDOW=10m
QUICK_INOUT_RATIO_THRESHOLD=0.9

# ================================
# Feature Flags
# ================================
ENABLE_WEBSOCKET=true
ENABLE_STOP_ORDER_MONITOR=true
ENABLE_RISK_MANAGER=true
ENABLE_SWAGGER=true
ENABLE_KYC=true
ENABLE_2FA=true
ENABLE_EMAIL_VERIFICATION=true

# Advanced Trading Features
ENABLE_STOP_LOSS=true
ENABLE_TAKE_PROFIT=true
ENABLE_TRAILING_STOP=true
ENABLE_OCO_ORDERS=false
ENABLE_ICEBERG_ORDERS=false
ENABLE_GRID_TRADING=false
ENABLE_COPY_TRADING=false

# DeFi Features
ENABLE_DEX_AGGREGATOR=false
ENABLE_LIQUIDITY_MINING=false
ENABLE_CROSS_CHAIN_BRIDGE=false

# ================================
# Monitoring & Observability
# ================================
PROMETHEUS_ENABLED=true
LOG_LEVEL=info
LOG_FORMAT=json

# Metrics
METRICS_ENABLED=true
METRICS_PORT=8081

# WebSocket Server
WS_PORT=8081

# Tracing
ENABLE_TRACING=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# ================================
# Grafana Configuration
# ================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change-this-grafana-password
GRAFANA_ROOT_URL=http://localhost:3000

# ================================
# PgAdmin Configuration
# ================================
PGADMIN_EMAIL=admin@easitrade.com
PGADMIN_PASSWORD=change-this-pgadmin-password

# ================================
# Email Configuration
# ================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@easitrade.com

# Email Templates
EMAIL_VERIFICATION_SUBJECT=Verify your EasiTrade account
WITHDRAWAL_CONFIRMATION_SUBJECT=Withdrawal confirmation required

# ================================
# SMS Configuration (for 2FA)
# ================================
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ================================
# External API Keys
# ================================
# Etherscan
ETHERSCAN_API_KEY=

# CoinGecko API (for price feeds)
COINGECKO_API_KEY=

# CoinMarketCap API
COINMARKETCAP_API_KEY=

# Binance API (for DEX aggregator)
BINANCE_API_KEY=
BINANCE_API_SECRET=

# ================================
# AWS Configuration (for production)
# ================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# S3 Buckets
S3_BUCKET_KYC_DOCUMENTS=easitrade-kyc-documents
S3_BUCKET_LOGS=easitrade-logs

# ================================
# Rate Limiting
# ================================
# API Rate Limits (requests per second)
RATE_LIMIT_PUBLIC_API=10
RATE_LIMIT_AUTHENTICATED_API=50
RATE_LIMIT_PREMIUM_API=200

# ================================
# Session Configuration
# ================================
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400

# ================================
# CORS Configuration
# ================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ================================
# KYC/AML Configuration
# ================================
KYC_PROVIDER=jumio
JUMIO_API_TOKEN=
JUMIO_API_SECRET=
KYC_REQUIRED_FOR_WITHDRAWAL=true
KYC_WITHDRAWAL_LIMIT=1000

# ================================
# Payment Gateway
# ================================
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ================================
# Cold/Hot Wallet Configuration
# ================================
HOT_WALLET_THRESHOLD=0.10
COLD_WALLET_ADDRESS_BTC=
COLD_WALLET_ADDRESS_ETH=
COLD_WALLET_ADDRESS_USDT=

# ================================
# Backup Configuration
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=easitrade-backups

# ================================
# Compliance & Regulations
# ================================
ENABLE_GEOBLOCKING=false
BLOCKED_COUNTRIES=
ENABLE_TRAVEL_RULE=false
TRAVEL_RULE_THRESHOLD=1000

# ================================
# Development Tools
# ================================
ENABLE_DEBUG_MODE=false
ENABLE_PROFILING=false
ENABLE_SQL_LOGGING=false

# ================================
# Load Balancing
# ================================
BACKEND_REPLICAS=3
ENABLE_STICKY_SESSIONS=true

# ================================
# Cache Configuration
# ================================
CACHE_TTL_PRICES=5s
CACHE_TTL_ORDER_BOOK=1s
CACHE_TTL_USER_PROFILE=5m
CACHE_TTL_MARKET_DATA=10s

# ================================
# WebSocket Configuration
# ================================
WS_MAX_CONNECTIONS=10000
WS_PING_INTERVAL=30s
WS_PONG_TIMEOUT=60s

# ================================
# Order Matching Engine
# ================================
MATCHING_ENGINE_TICK_INTERVAL=100ms
MATCHING_ENGINE_BATCH_SIZE=100

# ================================
# Stop Order Monitor
# ================================
STOP_ORDER_MONITOR_INTERVAL=1s
STOP_ORDER_BATCH_SIZE=1000

# ================================
# Notifications
# ================================
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=true
ENABLE_PUSH_NOTIFICATIONS=false

# ================================
# Analytics
# ================================
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# ================================
# CDN Configuration
# ================================
CDN_URL=https://cdn.easitrade.com
CLOUDFLARE_API_KEY=
CLOUDFLARE_ZONE_ID=

# ================================
# SSL/TLS Configuration
# ================================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# ================================
# Time Zone
# ================================
TZ=UTC
